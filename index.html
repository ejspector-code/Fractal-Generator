<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Fractal Generator ‚Äî Strange Attractors</title>
  <meta name="description"
    content="Advanced real-time fractal animation generator powered by Peter de Jong and Lorenz attractors with particle, vapor, and classic render modes." />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap"
    rel="stylesheet" />
  <link rel="stylesheet" href="/src/styles.css" />
</head>

<body>
  <div id="app">
    <!-- Canvas Area -->
    <main id="canvas-area">
      <div id="canvas-stage">
        <div id="canvas-container"></div>
        <canvas id="midi-keyboard-viz" style="display:none;"></canvas>

        <!-- MIDI Effects Drawer -->
        <div id="midi-effects-drawer" style="display:none;">
          <button id="midi-drawer-toggle" class="midi-drawer-handle" aria-label="Toggle effects drawer">
            <span class="midi-drawer-handle-bar"></span>
            <span class="midi-drawer-label">Effects</span>
            <span class="midi-drawer-chevron">‚ñº</span>
          </button>
          <div id="midi-drawer-content" class="midi-drawer-content">
            <div class="midi-fx-row">

              <!-- Waveform & Octave -->
              <div class="midi-fx-group">
                <div class="midi-fx-title">Synth</div>
                <div class="midi-fx-control">
                  <label for="fx-waveform">Wave</label>
                  <select id="fx-waveform">
                    <option value="sawtooth">Saw</option>
                    <option value="square">Square</option>
                    <option value="sine">Sine</option>
                    <option value="triangle">Tri</option>
                  </select>
                </div>
                <div class="midi-fx-control">
                  <label for="fx-octave">Octave <span class="fx-val" id="fx-val-octave">0</span></label>
                  <input type="range" id="fx-octave" min="-2" max="2" step="1" value="0" />
                </div>
                <div class="midi-fx-control">
                  <label for="fx-volume">Volume <span class="fx-val" id="fx-val-volume">0.50</span></label>
                  <input type="range" id="fx-volume" min="0" max="1" step="0.01" value="0.5" />
                </div>
              </div>

              <div class="midi-fx-divider"></div>

              <!-- ADSR -->
              <div class="midi-fx-group">
                <div class="midi-fx-title">ADSR</div>
                <div class="midi-fx-control">
                  <label for="fx-attack">Atk <span class="fx-val" id="fx-val-attack">0.05</span></label>
                  <input type="range" id="fx-attack" min="0.001" max="1.0" step="0.005" value="0.05" />
                </div>
                <div class="midi-fx-control">
                  <label for="fx-decay">Dec <span class="fx-val" id="fx-val-decay">0.15</span></label>
                  <input type="range" id="fx-decay" min="0.01" max="1.5" step="0.01" value="0.15" />
                </div>
                <div class="midi-fx-control">
                  <label for="fx-sustain">Sus <span class="fx-val" id="fx-val-sustain">0.60</span></label>
                  <input type="range" id="fx-sustain" min="0" max="1" step="0.01" value="0.6" />
                </div>
                <div class="midi-fx-control">
                  <label for="fx-release">Rel <span class="fx-val" id="fx-val-release">0.30</span></label>
                  <input type="range" id="fx-release" min="0.01" max="3.0" step="0.01" value="0.3" />
                </div>
              </div>

              <div class="midi-fx-divider"></div>

              <!-- Filter -->
              <div class="midi-fx-group">
                <div class="midi-fx-title">Filter</div>
                <div class="midi-fx-control">
                  <label for="fx-filter-type">Type</label>
                  <select id="fx-filter-type">
                    <option value="lowpass" selected>LP</option>
                    <option value="highpass">HP</option>
                    <option value="bandpass">BP</option>
                  </select>
                </div>
                <div class="midi-fx-control">
                  <label for="fx-filter-cutoff">Cutoff <span class="fx-val" id="fx-val-cutoff">8000</span></label>
                  <input type="range" id="fx-filter-cutoff" min="50" max="16000" step="10" value="8000" />
                </div>
                <div class="midi-fx-control">
                  <label for="fx-filter-q">Reso <span class="fx-val" id="fx-val-q">1.0</span></label>
                  <input type="range" id="fx-filter-q" min="0.1" max="20" step="0.1" value="1" />
                </div>
              </div>

              <div class="midi-fx-divider"></div>

              <!-- Distortion -->
              <div class="midi-fx-group">
                <div class="midi-fx-title">Distortion</div>
                <div class="midi-fx-control">
                  <label for="fx-distortion">Drive <span class="fx-val" id="fx-val-drive">0.0</span></label>
                  <input type="range" id="fx-distortion" min="0" max="1" step="0.01" value="0" />
                </div>
              </div>

              <div class="midi-fx-divider"></div>

              <!-- Wah-Wah -->
              <div class="midi-fx-group">
                <div class="midi-fx-title">Wah-Wah</div>
                <div class="midi-fx-control midi-fx-toggle-row">
                  <label for="fx-wah-toggle">Enable</label>
                  <input type="checkbox" id="fx-wah-toggle" />
                </div>
                <div class="midi-fx-control">
                  <label for="fx-wah-rate">Rate <span class="fx-val" id="fx-val-wah-rate">2.0</span></label>
                  <input type="range" id="fx-wah-rate" min="0.1" max="12" step="0.1" value="2" />
                </div>
                <div class="midi-fx-control">
                  <label for="fx-wah-depth">Depth <span class="fx-val" id="fx-val-wah-depth">4000</span></label>
                  <input type="range" id="fx-wah-depth" min="100" max="8000" step="50" value="4000" />
                </div>
                <div class="midi-fx-control">
                  <label for="fx-wah-base">Base <span class="fx-val" id="fx-val-wah-base">500</span></label>
                  <input type="range" id="fx-wah-base" min="100" max="3000" step="20" value="500" />
                </div>
              </div>

              <div class="midi-fx-divider"></div>

              <!-- Delay -->
              <div class="midi-fx-group">
                <div class="midi-fx-title">Delay</div>
                <div class="midi-fx-control">
                  <label for="fx-delay-time">Time <span class="fx-val" id="fx-val-delay-time">0.30</span></label>
                  <input type="range" id="fx-delay-time" min="0.01" max="1.5" step="0.01" value="0.3" />
                </div>
                <div class="midi-fx-control">
                  <label for="fx-delay-feedback">Feed <span class="fx-val" id="fx-val-delay-fb">0.30</span></label>
                  <input type="range" id="fx-delay-feedback" min="0" max="0.9" step="0.01" value="0.3" />
                </div>
                <div class="midi-fx-control">
                  <label for="fx-delay-mix">Mix <span class="fx-val" id="fx-val-delay-mix">0.00</span></label>
                  <input type="range" id="fx-delay-mix" min="0" max="1" step="0.01" value="0" />
                </div>
              </div>

              <div class="midi-fx-divider"></div>

              <!-- Reverb -->
              <div class="midi-fx-group">
                <div class="midi-fx-title">Reverb</div>
                <div class="midi-fx-control">
                  <label for="fx-reverb-mix">Mix <span class="fx-val" id="fx-val-reverb-mix">0.00</span></label>
                  <input type="range" id="fx-reverb-mix" min="0" max="1" step="0.01" value="0" />
                </div>
                <div class="midi-fx-control">
                  <label for="fx-reverb-decay">Decay <span class="fx-val" id="fx-val-reverb-decay">1.50</span></label>
                  <input type="range" id="fx-reverb-decay" min="0.3" max="5" step="0.1" value="1.5" />
                </div>
              </div>

              <div class="midi-fx-divider"></div>

              <!-- Looper -->
              <div class="midi-fx-group midi-fx-looper">
                <div class="midi-fx-title">Looper</div>
                <div class="midi-looper-controls">
                  <button id="fx-looper-rec" class="midi-looper-btn midi-looper-rec" title="Record">‚è∫</button>
                  <button id="fx-looper-play" class="midi-looper-btn midi-looper-play" title="Play/Pause"
                    disabled>‚ñ∂</button>
                  <button id="fx-looper-stop" class="midi-looper-btn midi-looper-stop" title="Clear" disabled>‚èπ</button>
                </div>
                <div class="midi-looper-status" id="fx-looper-status">Idle</div>
              </div>

            </div>
          </div>
        </div>
      </div>
      <div id="fps-counter">0 FPS</div>
    </main>

    <!-- Control Panel -->
    <aside id="panel">
      <header id="panel-header">
        <h1>Fractal Generator</h1>
        <p class="subtitle" id="attractor-subtitle">Strange Attractors</p>
      </header>

      <div id="panel-scroll">
        <!-- Seed Section -->
        <section class="panel-section">
          <h2 class="section-title">Seed</h2>
          <div class="seed-display" id="seed-display">12345</div>
          <div class="seed-nav">
            <button id="seed-prev" class="btn btn-sm" title="Previous">‚óÄ</button>
            <button id="seed-next" class="btn btn-sm" title="Next">‚ñ∂</button>
            <button id="seed-random" class="btn btn-sm btn-accent" title="Random">‚ö°</button>
          </div>
          <div class="seed-jump">
            <label for="seed-input" class="sr-only">Jump to seed</label>
            <input type="number" id="seed-input" placeholder="Jump to seed..." />
            <button id="seed-go" class="btn btn-sm">Go</button>
          </div>
        </section>

        <!-- Attractor Type Section -->
        <section class="panel-section">
          <h2 class="section-title">Attractor Type</h2>
          <div class="control-group">
            <label for="attractor-type" class="sr-only">Attractor type</label>
            <select id="attractor-type">
              <option value="dejong" selected>ü¶ã Peter de Jong</option>
              <option value="clifford">üåä Clifford</option>
              <option value="lorenz">üåÄ Lorenz</option>
              <option value="aizawa">üîÆ Aizawa</option>
              <option value="buddhabrot">üëª Buddhabrot</option>
              <option value="burningship">üî• Burning Ship</option>
              <option value="curlnoise">üå´Ô∏è Curl Noise</option>
            </select>
          </div>
        </section>

        <!-- Canvas Size Section -->
        <section class="panel-section">
          <h2 class="section-title">Canvas Size</h2>
          <div class="control-group">
            <label for="canvas-aspect" class="sr-only">Canvas aspect ratio</label>
            <select id="canvas-aspect">
              <option value="1:1" selected>‚¨ú 1 : 1 (Square)</option>
              <option value="16:9">üñ•Ô∏è 16 : 9 (Landscape)</option>
              <option value="9:16">üì± 9 : 16 (Portrait)</option>
            </select>
          </div>
        </section>

        <!-- Symmetry Section -->
        <section class="panel-section">
          <h2 class="section-title">Symmetry</h2>
          <div class="control-group">
            <label for="symmetry-folds" class="sr-only">Symmetry folds</label>
            <select id="symmetry-folds">
              <option value="1" selected>üî≤ Off</option>
              <option value="2">ü™û 2-fold</option>
              <option value="4">‚ú¶ 4-fold</option>
              <option value="6">‚ùÑÔ∏è 6-fold</option>
              <option value="8">‚ú¥Ô∏è 8-fold</option>
            </select>
          </div>
        </section>

        <!-- Presets Section -->
        <section class="panel-section">
          <h2 class="section-title">Presets</h2>
          <div id="presets-grid" class="presets-grid"></div>
        </section>

        <!-- De Jong Coefficients -->
        <section class="panel-section" id="dejong-coeffs">
          <h2 class="section-title">Coefficients (a, b, c, d)</h2>
          <div class="control-group">
            <label for="coeff-a">a <span class="value-display" id="val-a">-2.24</span></label>
            <input type="range" id="coeff-a" min="-3.14" max="3.14" step="0.01" value="-2.24" />
          </div>
          <div class="control-group">
            <label for="coeff-b">b <span class="value-display" id="val-b">0.43</span></label>
            <input type="range" id="coeff-b" min="-3.14" max="3.14" step="0.01" value="0.43" />
          </div>
          <div class="control-group">
            <label for="coeff-c">c <span class="value-display" id="val-c">-0.65</span></label>
            <input type="range" id="coeff-c" min="-3.14" max="3.14" step="0.01" value="-0.65" />
          </div>
          <div class="control-group">
            <label for="coeff-d">d <span class="value-display" id="val-d">-2.43</span></label>
            <input type="range" id="coeff-d" min="-3.14" max="3.14" step="0.01" value="-2.43" />
          </div>
          <button id="randomize-btn" class="btn btn-full btn-accent">‚ö° Randomize</button>
        </section>

        <!-- Lorenz Coefficients -->
        <section class="panel-section" id="lorenz-coeffs" style="display:none;">
          <h2 class="section-title">Coefficients (œÉ, œÅ, Œ≤)</h2>
          <div class="control-group">
            <label for="coeff-sigma">œÉ (sigma) <span class="value-display" id="val-sigma">10.00</span></label>
            <input type="range" id="coeff-sigma" min="0" max="30" step="0.1" value="10" />
          </div>
          <div class="control-group">
            <label for="coeff-rho">œÅ (rho) <span class="value-display" id="val-rho">28.00</span></label>
            <input type="range" id="coeff-rho" min="0" max="120" step="0.1" value="28" />
          </div>
          <div class="control-group">
            <label for="coeff-beta">Œ≤ (beta) <span class="value-display" id="val-beta">2.67</span></label>
            <input type="range" id="coeff-beta" min="0" max="10" step="0.01" value="2.667" />
          </div>
          <button id="randomize-lorenz-btn" class="btn btn-full btn-accent">‚ö° Randomize</button>
        </section>

        <!-- Clifford Coefficients -->
        <section class="panel-section" id="clifford-coeffs" style="display:none;">
          <h2 class="section-title">Coefficients (a, b, c, d)</h2>
          <div class="control-group">
            <label for="coeff-cliff-a">a <span class="value-display" id="val-cliff-a">-1.40</span></label>
            <input type="range" id="coeff-cliff-a" min="-3" max="3" step="0.01" value="-1.4" />
          </div>
          <div class="control-group">
            <label for="coeff-cliff-b">b <span class="value-display" id="val-cliff-b">1.60</span></label>
            <input type="range" id="coeff-cliff-b" min="-3" max="3" step="0.01" value="1.6" />
          </div>
          <div class="control-group">
            <label for="coeff-cliff-c">c <span class="value-display" id="val-cliff-c">1.00</span></label>
            <input type="range" id="coeff-cliff-c" min="-2" max="2" step="0.01" value="1.0" />
          </div>
          <div class="control-group">
            <label for="coeff-cliff-d">d <span class="value-display" id="val-cliff-d">0.70</span></label>
            <input type="range" id="coeff-cliff-d" min="-2" max="2" step="0.01" value="0.7" />
          </div>
          <button id="randomize-clifford-btn" class="btn btn-full btn-accent">‚ö° Randomize</button>
        </section>

        <!-- Aizawa Coefficients -->
        <section class="panel-section" id="aizawa-coeffs" style="display:none;">
          <h2 class="section-title">Coefficients (a, b, c, d, e, f)</h2>
          <div class="control-group">
            <label for="coeff-aiz-a">a <span class="value-display" id="val-aiz-a">0.95</span></label>
            <input type="range" id="coeff-aiz-a" min="0.1" max="2.0" step="0.01" value="0.95" />
          </div>
          <div class="control-group">
            <label for="coeff-aiz-b">b <span class="value-display" id="val-aiz-b">0.70</span></label>
            <input type="range" id="coeff-aiz-b" min="0.1" max="1.5" step="0.01" value="0.7" />
          </div>
          <div class="control-group">
            <label for="coeff-aiz-c">c <span class="value-display" id="val-aiz-c">0.60</span></label>
            <input type="range" id="coeff-aiz-c" min="0.1" max="1.5" step="0.01" value="0.6" />
          </div>
          <div class="control-group">
            <label for="coeff-aiz-d">d <span class="value-display" id="val-aiz-d">3.50</span></label>
            <input type="range" id="coeff-aiz-d" min="1.0" max="6.0" step="0.1" value="3.5" />
          </div>
          <div class="control-group">
            <label for="coeff-aiz-e">e <span class="value-display" id="val-aiz-e">0.25</span></label>
            <input type="range" id="coeff-aiz-e" min="0.01" max="1.0" step="0.01" value="0.25" />
          </div>
          <div class="control-group">
            <label for="coeff-aiz-f">f <span class="value-display" id="val-aiz-f">0.10</span></label>
            <input type="range" id="coeff-aiz-f" min="0.01" max="0.5" step="0.01" value="0.1" />
          </div>
          <button id="randomize-aizawa-btn" class="btn btn-full btn-accent">‚ö° Randomize</button>
        </section>

        <!-- Buddhabrot Controls -->
        <section class="panel-section" id="buddhabrot-coeffs" style="display:none;">
          <h2 class="section-title">Parameters</h2>
          <div class="control-group">
            <label for="bb-maxiter">Max Iterations <span class="value-display" id="val-bb-maxiter">200</span></label>
            <input type="range" id="bb-maxiter" min="10" max="5000" step="10" value="200" />
          </div>
          <div class="control-group">
            <label for="bb-samples">Samples <span class="value-display" id="val-bb-samples">500K</span></label>
            <input type="range" id="bb-samples" min="4" max="6.5" step="0.1" value="5.7" />
          </div>
          <div class="control-group toggle-row">
            <label for="bb-anti">Anti-Buddhabrot</label>
            <input type="checkbox" id="bb-anti" />
          </div>
          <div class="control-group">
            <label for="bb-zoom">Zoom <span class="value-display" id="val-bb-zoom">1.00</span></label>
            <input type="range" id="bb-zoom" min="0.3" max="8" step="0.1" value="1.0" />
          </div>
          <div class="control-group">
            <label for="bb-center-x">Center X <span class="value-display" id="val-bb-cx">-0.50</span></label>
            <input type="range" id="bb-center-x" min="-2" max="1" step="0.01" value="-0.5" />
          </div>
          <div class="control-group">
            <label for="bb-center-y">Center Y <span class="value-display" id="val-bb-cy">0.00</span></label>
            <input type="range" id="bb-center-y" min="-1.5" max="1.5" step="0.01" value="0" />
          </div>
        </section>

        <!-- Burning Ship Controls -->
        <section class="panel-section" id="burningship-coeffs" style="display:none;">
          <h2 class="section-title">Parameters</h2>
          <div class="control-group">
            <label for="bs-maxiter">Max Iterations <span class="value-display" id="val-bs-maxiter">200</span></label>
            <input type="range" id="bs-maxiter" min="10" max="5000" step="10" value="200" />
          </div>
          <div class="control-group">
            <label for="bs-samples">Samples <span class="value-display" id="val-bs-samples">500K</span></label>
            <input type="range" id="bs-samples" min="4" max="6.5" step="0.1" value="5.7" />
          </div>
          <div class="control-group toggle-row">
            <label for="bs-anti">Anti-Ship</label>
            <input type="checkbox" id="bs-anti" />
          </div>
          <div class="control-group">
            <label for="bs-zoom">Zoom <span class="value-display" id="val-bs-zoom">1.00</span></label>
            <input type="range" id="bs-zoom" min="0.3" max="8" step="0.1" value="1.0" />
          </div>
          <div class="control-group">
            <label for="bs-center-x">Center X <span class="value-display" id="val-bs-cx">-0.40</span></label>
            <input type="range" id="bs-center-x" min="-2" max="1" step="0.01" value="-0.4" />
          </div>
          <div class="control-group">
            <label for="bs-center-y">Center Y <span class="value-display" id="val-bs-cy">-0.60</span></label>
            <input type="range" id="bs-center-y" min="-1.5" max="1.5" step="0.01" value="-0.6" />
          </div>
        </section>

        <!-- Curl Noise Controls -->
        <section class="panel-section" id="curlnoise-coeffs" style="display:none;">
          <h2 class="section-title">Flow Field Parameters</h2>
          <div class="control-group">
            <label for="cn-scale">Noise Scale <span class="value-display" id="val-cn-scale">1.50</span></label>
            <input type="range" id="cn-scale" min="0.3" max="5.0" step="0.1" value="1.5" />
          </div>
          <div class="control-group">
            <label for="cn-octaves">Octaves <span class="value-display" id="val-cn-octaves">4</span></label>
            <input type="range" id="cn-octaves" min="1" max="8" step="1" value="4" />
          </div>
          <div class="control-group">
            <label for="cn-lacunarity">Lacunarity <span class="value-display" id="val-cn-lacunarity">2.00</span></label>
            <input type="range" id="cn-lacunarity" min="1.0" max="4.0" step="0.1" value="2.0" />
          </div>
          <div class="control-group">
            <label for="cn-gain">Gain <span class="value-display" id="val-cn-gain">0.50</span></label>
            <input type="range" id="cn-gain" min="0.1" max="0.9" step="0.05" value="0.5" />
          </div>
          <div class="control-group">
            <label for="cn-speed">Speed <span class="value-display" id="val-cn-speed">0.50</span></label>
            <input type="range" id="cn-speed" min="0.05" max="2.0" step="0.05" value="0.5" />
          </div>
          <button id="randomize-curlnoise-btn" class="btn btn-full btn-accent">‚ö° Randomize</button>
        </section>

        <!-- Render Mode Section -->
        <section class="panel-section">
          <h2 class="section-title">Render Mode</h2>
          <div class="control-group">
            <label for="render-mode" class="sr-only">Render mode</label>
            <select id="render-mode">
              <option value="classic" selected>üé® Classic (Density)</option>
              <option value="particles">‚ú® Particles</option>
              <option value="vapor">üå´Ô∏è Vapor</option>
            </select>
          </div>

          <!-- Classic sub-controls -->
          <div id="classic-controls" class="sub-controls">
            <div class="control-group">
              <label for="iterations">Iterations <span class="value-display" id="val-iterations">500K</span></label>
              <input type="range" id="iterations" min="4" max="7" step="0.1" value="5.7" />
            </div>
            <div class="control-group">
              <label for="density-mode">Density Map</label>
              <select id="density-mode">
                <option value="sqrt" selected>Square Root</option>
                <option value="log">Logarithmic</option>
                <option value="linear">Linear</option>
              </select>
            </div>
          </div>

          <!-- Particle sub-controls -->
          <div id="particle-controls" class="sub-controls" style="display:none;">
            <div class="control-group">
              <label for="particle-count">Particle Count <span class="value-display" id="val-pcount">2000</span></label>
              <input type="range" id="particle-count" min="200" max="8000" step="100" value="2000" />
            </div>
            <div class="control-group">
              <label for="trail-length">Trail Length <span class="value-display" id="val-trail">0.92</span></label>
              <input type="range" id="trail-length" min="0.5" max="0.99" step="0.01" value="0.92" />
            </div>
            <div class="control-group">
              <label for="glow-intensity">Glow Intensity <span class="value-display" id="val-glow">1.5</span></label>
              <input type="range" id="glow-intensity" min="0" max="4" step="0.1" value="1.5" />
            </div>
            <div class="control-group">
              <label for="particle-size">Point Size <span class="value-display" id="val-psize">2.0</span></label>
              <input type="range" id="particle-size" min="0.5" max="6" step="0.1" value="2.0" />
            </div>
          </div>

          <!-- Vapor sub-controls -->
          <div id="vapor-controls" class="sub-controls" style="display:none;">
            <div class="control-group">
              <label for="vapor-count">Particle Count <span class="value-display" id="val-vpcount">3000</span></label>
              <input type="range" id="vapor-count" min="500" max="10000" step="100" value="3000" />
            </div>
            <div class="control-group">
              <label for="blur-passes">Blur Passes <span class="value-display" id="val-blur">3</span></label>
              <input type="range" id="blur-passes" min="0" max="8" step="1" value="3" />
            </div>
            <div class="control-group">
              <label for="turbulence">Turbulence <span class="value-display" id="val-turb">0.4</span></label>
              <input type="range" id="turbulence" min="0" max="1" step="0.01" value="0.4" />
            </div>
            <div class="control-group">
              <label for="dissipation">Dissipation <span class="value-display" id="val-dissipation">0.96</span></label>
              <input type="range" id="dissipation" min="0.85" max="0.99" step="0.01" value="0.96" />
            </div>
          </div>
        </section>

        <!-- Colors Section -->
        <section class="panel-section">
          <h2 class="section-title">Colors</h2>
          <div class="control-group">
            <label for="color-mode">Color Mode</label>
            <select id="color-mode">
              <option value="spectral" selected>üåà Spectral</option>
              <option value="dual">üé≠ Dual Blend</option>
              <option value="vivid">üîÆ Vivid (Multi-Gradient)</option>
              <option value="single">üîµ Single Color</option>
            </select>
          </div>
          <div id="color-pickers" class="color-picker-row">
            <div class="control-group">
              <label for="color-a">Color A</label>
              <input type="color" id="color-a" value="#00d4ff" />
            </div>
            <div class="control-group">
              <label for="color-b">Color B</label>
              <input type="color" id="color-b" value="#ff006e" />
            </div>
          </div>
          <div class="control-group">
            <label for="bg-color">Background</label>
            <input type="color" id="bg-color" value="#0a0a0f" />
          </div>
          <div class="control-group" id="blend-mode-group" style="display:none;">
            <label for="blend-mode">Blend Mode</label>
            <select id="blend-mode">
              <option value="normal" selected>üé® Normal</option>
              <option value="add">‚ú® Additive</option>
            </select>
          </div>
          <div class="palette-section">
            <label class="palette-label">Palettes</label>
            <div id="palette-grid" class="palette-grid"></div>
          </div>
        </section>

        <!-- Diffusion Section -->
        <section class="panel-section">
          <h2 class="section-title">Diffusion</h2>
          <div class="control-group toggle-row">
            <label for="diffusion-toggle">Enable</label>
            <input type="checkbox" id="diffusion-toggle" />
          </div>
          <div class="control-group">
            <label for="diffusion-strength">Strength <span class="value-display" id="val-diffusion">1.5</span></label>
            <input type="range" id="diffusion-strength" min="0.5" max="5" step="0.1" value="1.5" />
          </div>
        </section>

        <!-- Mouse Interaction Section -->
        <section class="panel-section">
          <h2 class="section-title">Mouse Interaction</h2>
          <div class="control-group toggle-row">
            <label for="mouse-toggle">Enable</label>
            <input type="checkbox" id="mouse-toggle" />
          </div>
          <div class="control-group">
            <label for="mouse-strength">Strength <span class="value-display" id="val-mouse-strength">0.50</span></label>
            <input type="range" id="mouse-strength" min="0.05" max="2.0" step="0.05" value="0.5" />
          </div>
          <div class="control-group">
            <label for="mouse-mode">Mode</label>
            <select id="mouse-mode">
              <option value="attract" selected>üß≤ Attract</option>
              <option value="repel">üí• Repel</option>
              <option value="orbit">üåÄ Orbit</option>
            </select>
          </div>
        </section>

        <!-- Animation Section -->
        <section class="panel-section">
          <h2 class="section-title">Animation</h2>
          <div class="control-group toggle-row">
            <label for="auto-animate">Auto Animate</label>
            <input type="checkbox" id="auto-animate" checked />
          </div>
          <div class="control-group">
            <label for="anim-speed">Speed <span class="value-display" id="val-speed">0.003</span></label>
            <input type="range" id="anim-speed" min="0.0005" max="0.02" step="0.0005" value="0.003" />
          </div>
          <div class="anim-controls">
            <button id="btn-play" class="btn btn-sm btn-accent">‚ñ∂ Play</button>
            <button id="btn-pause" class="btn btn-sm" style="display:none">‚è∏ Pause</button>
          </div>
        </section>

        <!-- Audio Reactive Section -->
        <section class="panel-section">
          <h2 class="section-title">Audio Reactive</h2>
          <div class="audio-status-row">
            <span class="audio-status-dot" id="audio-status-dot"></span>
            <span class="audio-status-text" id="audio-status-text">Off</span>
          </div>
          <button id="btn-listen" class="btn btn-full btn-accent">üé§ Listen</button>
          <button id="btn-stop-listen" class="btn btn-full btn-danger" style="display:none">‚èπ Stop Listening</button>
          <canvas id="audio-visualizer" width="280" height="40"></canvas>
          <div class="control-group" style="margin-top: 10px;">
            <label for="audio-sensitivity">Sensitivity <span class="value-display"
                id="val-sensitivity">1.00</span></label>
            <input type="range" id="audio-sensitivity" min="0.1" max="3.0" step="0.05" value="1.0" />
          </div>
          <div class="control-group" style="margin-top: 10px;">
            <label>
              <input type="checkbox" id="waveform-toggle" /> Waveform Overlay
            </label>
          </div>
          <div class="control-group" id="waveform-style-group" style="display:none; margin-top: 6px;">
            <label for="waveform-style">Style</label>
            <select id="waveform-style">
              <option value="oscilloscope">Oscilloscope</option>
              <option value="mirrored">Mirrored</option>
              <option value="circular">Circular</option>
              <option value="bars">Bars</option>
              <option value="radial">Radial</option>
            </select>
          </div>
          <div class="control-group" id="waveform-intensity-group" style="display:none; margin-top: 6px;">
            <label for="waveform-intensity">Intensity <span class="value-display"
                id="val-waveform-intensity">0.70</span></label>
            <input type="range" id="waveform-intensity" min="0.1" max="1.0" step="0.05" value="0.7" />
          </div>

          <!-- MIDI Keyboard -->
          <div class="control-group midi-section"
            style="margin-top: 14px; padding-top: 14px; border-top: 1px solid var(--border);">
            <label for="midi-toggle">MIDI Keyboard</label>
            <div class="midi-toggle-row">
              <input type="checkbox" id="midi-toggle" />
              <span class="midi-status-dot" id="midi-status-dot"></span>
              <span class="midi-status-text" id="midi-status-text">Off</span>
            </div>
          </div>
          <div id="midi-controls" style="display:none">
            <div class="control-group">
              <label for="midi-waveform">Waveform</label>
              <select id="midi-waveform">
                <option value="sawtooth">üî∂ Sawtooth</option>
                <option value="square">‚¨õ Square</option>
                <option value="sine">üîµ Sine</option>
                <option value="triangle">üî∫ Triangle</option>
              </select>
            </div>
            <div class="control-group">
              <label>Device <span class="value-display" id="midi-device-name">‚Äî</span></label>
            </div>
          </div>
        </section>

        <!-- Post-Processing Section -->
        <section class="panel-section">
          <h2 class="section-title">Post-Processing</h2>

          <div class="control-group toggle-row">
            <label for="pp-bloom">Bloom</label>
            <input type="checkbox" id="pp-bloom" />
          </div>
          <div class="control-group">
            <label for="pp-bloom-strength">Strength <span class="value-display" id="val-pp-bloom">0.50</span></label>
            <input type="range" id="pp-bloom-strength" min="0" max="1" step="0.05" value="0.5" />
          </div>

          <div class="control-group toggle-row">
            <label for="pp-chromatic">Chromatic Aberration</label>
            <input type="checkbox" id="pp-chromatic" />
          </div>
          <div class="control-group">
            <label for="pp-chromatic-strength">Strength <span class="value-display"
                id="val-pp-chromatic">0.50</span></label>
            <input type="range" id="pp-chromatic-strength" min="0" max="1" step="0.05" value="0.5" />
          </div>

          <div class="control-group toggle-row">
            <label for="pp-vignette">Vignette</label>
            <input type="checkbox" id="pp-vignette" />
          </div>
          <div class="control-group">
            <label for="pp-vignette-strength">Strength <span class="value-display"
                id="val-pp-vignette">0.50</span></label>
            <input type="range" id="pp-vignette-strength" min="0" max="1" step="0.05" value="0.5" />
          </div>

          <div class="control-group toggle-row">
            <label for="pp-grain">Film Grain</label>
            <input type="checkbox" id="pp-grain" />
          </div>
          <div class="control-group">
            <label for="pp-grain-strength">Strength <span class="value-display" id="val-pp-grain">0.30</span></label>
            <input type="range" id="pp-grain-strength" min="0" max="1" step="0.05" value="0.3" />
          </div>

          <div class="control-group toggle-row">
            <label for="pp-scanlines">Scanlines</label>
            <input type="checkbox" id="pp-scanlines" />
          </div>
          <div class="control-group">
            <label for="pp-scanlines-strength">Strength <span class="value-display"
                id="val-pp-scanlines">0.40</span></label>
            <input type="range" id="pp-scanlines-strength" min="0" max="1" step="0.05" value="0.4" />
          </div>
        </section>

        <!-- Actions Section -->
        <section class="panel-section">
          <h2 class="section-title">Actions</h2>
          <button id="btn-save" class="btn btn-full">üì∑ Save PNG</button>
          <button id="btn-record" class="btn btn-full">üé¨ Record WebM</button>
          <button id="btn-stop-record" class="btn btn-full btn-danger" style="display:none">‚èπ Stop Recording</button>
          <button id="btn-reset" class="btn btn-full">üîÑ Reset</button>
        </section>


      </div>
    </aside>
  </div>

  <script type="module" src="/src/main.js"></script>
</body>

</html>